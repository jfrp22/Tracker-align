<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acerca de - Nodo IoT Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/config.css">
    <link rel="stylesheet" href="css/about.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-microchip"></i> Nodo IoT Tracker</h1>
            <p class="subtitle">Sistema avanzado de geolocalización, orientación y gestión remota</p>
        </header>
        
        <nav>
            <a href="main.html"><i class="fas fa-home"></i> Inicio</a>
            <a href="gps.html"><i class="fas fa-map-marked-alt"></i> Tracker GPS</a>
            <a href="config.html"><i class="fas fa-network-wired"></i> Configuración</a>
            <a href="control.html"><i class="fas fa-cog"></i> CMA</a>
            <a href="about.html" class="active"><i class="fas fa-info-circle"></i> Acerca de</a>
            <a href="contact.html"><i class="fas fa-envelope"></i> Contacto</a>
        </nav>
        
        <div class="about-card">
            <section class="project-description">
                <h2><i class="fas fa-project-diagram"></i> Descripción del Proyecto</h2>
                <p>Este proyecto implementa un nodo IoT basado en ESP8266 con funcionalidades avanzadas de conectividad, geolocalización, orientación y gestión remota. Combina hardware (GPS, WiFi, IMU, magnetómetro, servomotores) y software (servidor web, MQTT, OTA) para crear un sistema escalable y configurable para aplicaciones de apuntamiento y seguimiento.</p>
            </section>

            <section class="components">
                <h2><i class="fas fa-puzzle-piece"></i> Componentes Clave</h2>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-microchip"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Hardware</h3>
                        <ul>
                            <li><strong>ESP8266:</strong> Microcontrolador con WiFi integrado (80MHz, 4MB Flash)</li>
                            <li><strong>Módulo GPS (ej. NEO-6M):</strong> Proporciona datos de ubicación (latitud, longitud, altitud) mediante comunicación serial</li>
                            <li><strong>Módulo IMU MPU6050:</strong> Proporciona datos de aceleración lineal y velocidad angular (giroscopio y acelerómetro)</li>
                            <li><strong>Magnetómetro QMC5883L:</strong> Proporciona datos del campo magnético para cálculo del heading (rumbo)</li>
                            <li><strong>Servomotores de 360° (x2):</strong> Control de azimut (D7) y elevación (D6) para sistemas de apuntamiento</li>
                            <li><strong>Interfaz Serial:</strong> Comunicación con el GPS mediante pines D3 (RX) y D4 (TX)</li>
                            <li><strong>Interfaz I2C:</strong> Comunicación con el MPU6050 y QMC5883L mediante pines D1 (SCL) y D2 (SDA)</li>
                            <li><strong>Botón físico (D5):</strong> Para reset de configuración (3 segundos) o reset de fábrica (8 segundos)</li>
                            <li><strong>LED de estado (D8):</strong> Indicador visual del estado del sistema</li>
                        </ul>
                    </div>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Software</h3>
                        <h4>Protocolos:</h4>
                        <ul>
                            <li><strong>WiFi:</strong> Conexión a redes locales o modo AP (punto de acceso: IoTNode-AP/config1234)</li>
                            <li><strong>MQTT:</strong> Comunicación con brokers públicos (Mosquitto, HiveMQ, EMQX) para mensajería lightweight</li>
                            <li><strong>mDNS:</strong> Resolución de nombres en red local (hostname: antenna)</li>
                            <li><strong>HTTP:</strong> Servidor web con autenticación (admin/iotlab123)</li>
                        </ul>
                        <h4>Librerías:</h4>
                        <ul>
                            <li><strong>TinyGPS++</strong> (procesamiento GPS)</li>
                            <li><strong>PubSubClient</strong> (MQTT)</li>
                            <li><strong>ESPAsyncWebServer</strong> (servidor web asíncrono)</li>
                            <li><strong>ArduinoOTA</strong> (actualizaciones inalámbricas)</li>
                            <li><strong>MPU6050</strong> (gestión del sensor IMU)</li>
                            <li><strong>Servo</strong> (control de servomotores)</li>
                            <li><strong>ArduinoJson</strong> (manejo de datos JSON)</li>
                            <li><strong>Ticker</strong> (temporizadores no bloqueantes)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="features">
                <h2><i class="fas fa-cogs"></i> Funcionalidades Principales</h2>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-sliders-h"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Configuración Flexible</h3>
                        <h4>Modos de Operación:</h4>
                        <ul>
                            <li><strong>WiFi Client:</strong> Conecta a redes guardadas en EEPROM</li>
                            <li><strong>Modo AP:</strong> Si no hay credenciales WiFi, crea una red (IoTNode-AP) para configuración</li>
                        </ul>
                        <h4>Interfaz Web:</h4>
                        <ul>
                            <li>Dashboard con autenticación (admin/iotlab123)</li>
                            <li>Páginas para:
                                <ul>
                                    <li>Configurar WiFi (SSID/contraseña)</li>
                                    <li>Definir el rol del nodo (MASTER, SLAVE, UNCONFIGURED)</li>
                                    <li>Emparejar nodos (ej.: esclavos con un maestro)</li>
                                    <li>Control manual de servos (azimut y elevación)</li>
                                    <li>Calibración de brújula y heading</li>
                                    <li>Configuración de coordenadas manuales/GPS</li>
                                    <li>Configuración de objetivo de apuntamiento</li>
                                    <li>Reinicio de fábrica (borra EEPROM)</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Comunicación MQTT</h3>
                        <h4>Brokers Soportados:</h4>
                        <pre>const char* mqtt_servers[] = {
  "test.mosquitto.org", 
  "broker.hivemq.com", 
  "broker.emqx.io"
};</pre>
                        <h4>Tópicos Clave:</h4>
                        <ul>
                            <li><strong>iotlab/nodes/status:</strong> Publica estado del nodo (IP, RSSI, rol)</li>
                            <li><strong>iotlab/gps/data:</strong> Envía coordenadas GPS</li>
                            <li><strong>iotlab/sensor/data:</strong> Datos de IMU, heading y estado de servos</li>
                            <li><strong>iotlab/servo/control:</strong> Control remoto de servomotores</li>
                            <li><strong>iotlab/nodes/config:</strong> Recibe comandos para cambiar rol o emparejar</li>
                            <li><strong>iotlab/pairing/request:</strong> Solicitudes de emparejamiento (para maestros)</li>
                            <li><strong>iotlab/pairing/response:</strong> Respuestas de emparejamiento</li>
                            <li><strong>iotlab/pairing/unpair_request:</strong> Solicitudes de desemparejamiento</li>
                            <li><strong>iotlab/pairing/unpair_confirm:</strong> Confirmaciones de desemparejamiento</li>
                            <li><strong>iotlab/master/{MAC}/broadcast:</strong> Comunicación maestro-esclavo</li>
                            <li><strong>iotlab/nodes/{MAC}/distance:</strong> Publicación de distancias entre nodos</li>
                        </ul>
                    </div>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-sitemap"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Roles y Jerarquía</h3>
                        <ul>
                            <li><strong>MASTER:</strong>
                                <ul>
                                    <li>Gestiona esclavos (lista en pairedDevice)</li>
                                    <li>Envía broadcasts a esclavos mediante iotlab/master/{MAC}/broadcast</li>
                                    <li>Recibe solicitudes de emparejamiento</li>
                                    <li>Gestiona solicitudes de desemparejamiento</li>
                                    <li>Puede tener múltiples esclavos emparejados</li>
                                </ul>
                            </li>
                            <li><strong>SLAVE:</strong>
                                <ul>
                                    <li>Se suscribe al tópico de su maestro</li>
                                    <li>Responde a comandos remotos</li>
                                    <li>Calcula y publica distancia al maestro</li>
                                    <li>Solo puede estar emparejado con un maestro</li>
                                    <li>Puede solicitar desemparejamiento</li>
                                </ul>
                            </li>
                            <li><strong>UNCONFIGURED:</strong> Esperando configuración inicial</li>
                        </ul>
                    </div>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Geolocalización y Orientación</h3>
                        <h4>Procesamiento GPS:</h4>
                        <ul>
                            <li>Lectura continua de datos NMEA con TinyGPS++</li>
                            <li>Filtro de mediana para suavizado de datos (5 muestras)</li>
                            <li>Modo coordenadas manuales como alternativa al GPS</li>
                            <li>Publicación periódica (cada 5s) de:
                                <pre>{
  "mac": "ABC123",
  "lat": 12.345678,
  "lng": -98.765432,
  "alt": 250.5,
  "sats": 8,
  "time": 1234567890
}</pre>
                            </li>
                        </ul>
                        
                        <h4>Orientación y Apuntamiento:</h4>
                        <ul>
                            <li>Cálculo de pitch, roll y yaw a partir del MPU6050</li>
                            <li>Determinación del heading (rumbo) mediante magnetómetro QMC5883L</li>
                            <li>Sistema de calibración de heading inicial</li>
                            <li>Offset de heading configurable para corrección</li>
                            <li>Límites de movimiento para azimut (±45°) y elevación (70°-125°)</li>
                            <li>Control de servos con verificación de límites en tiempo real</li>
                            <li>Apuntamiento automático a coordenadas objetivo</li>
                            <li>Cálculo de bearing y distancia a objetivo</li>
                            <li>Control de elevación basado en distancia al objetivo</li>
                        </ul>
                    </div>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Actualizaciones OTA (Over-The-Air)</h3>
                        <ul>
                            <li>Actualización inalámbrica del firmware</li>
                            <li>Autenticación con contraseña (admin)</li>
                            <li>Indicación visual mediante LED durante el proceso</li>
                            <li>Reinicio automático tras actualización exitosa</li>
                            <li>Hostname personalizado (antenna-{MAC})</li>
                        </ul>
                    </div>
                </div>
                
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="feature-text">
                        <h3>Persistencia y Robustez</h3>
                        <ul>
                            <li><strong>EEPROM (512 bytes):</strong>
                                <ul>
                                    <li>Almacena configuración crítica (WiFi, rol, emparejamiento)</li>
                                    <li>Guarda heading inicial y offset de calibración</li>
                                    <li>Soporta reinicios sin pérdida de datos</li>
                                    <li>Verificación de borrado en reset de fábrica</li>
                                </ul>
                            </li>
                            <li><strong>Mecanismos de Recuperación:</strong>
                                <ul>
                                    <li>Reintentos de conexión WiFi/MQTT con rotación de brokers</li>
                                    <li>Temporizadores (Ticker) para evitar bloqueos</li>
                                    <li>Reset por hardware (botón físico)</li>
                                    <li>Reset de configuración (3 segundos) y de fábrica (8 segundos)</li>
                                    <li>Verificación de borrado de EEPROM en reset de fábrica</li>
                                </ul>
                            </li>
                            <li><strong>Protección de Hardware:</strong>
                                <ul>
                                    <li>Límites software para evitar daños mecánicos en servos</li>
                                    <li>Detención de emergencia de servos</li>
                                    <li>Sistema de histéresis para evitar oscilaciones en límites</li>
                                    <li>Verificación de límites en tiempo real para ambos servos</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="data-flow">
                <h2><i class="fas fa-exchange-alt"></i> Flujo de Datos</h2>
                <div class="feature">
                    <div class="feature-icon">
                        <i class="fas fa-play"></i>
                    </div>
                    <div class="feature-text">
                        <ol>
                            <li><strong>Inicio:</strong>
                                <ul>
                                    <li>Carga configuración desde EEPROM</li>
                                    <li>Conecta a WiFi o inicia modo AP</li>
                                    <li>Inicializa sensores (MPU6050, QMC5883L) y servos</li>
                                    <li>Inicia servidor web y configura OTA</li>
                                    <li>Conecta a broker MQTT y publica estado</li>
                                    <li>Suscribe a tópicos según el rol del nodo</li>
                                </ul>
                            </li>
                            <li><strong>Operación Normal:</strong>
                                <ul>
                                    <li>Lectura continua de GPS y procesamiento con filtro de mediana</li>
                                    <li>Lectura de sensores IMU y cálculo de orientación</li>
                                    <li>Publicación periódica de datos (estado, GPS, sensores)</li>
                                    <li>Escucha mensajes MQTT (configuración/comandos)</li>
                                    <li>Verificación de límites de servos en tiempo real</li>
                                    <li>Manejo de emparejamiento maestro-esclavo</li>
                                    <li>Gestión de desemparejamientos</li>
                                    <li>Apuntamiento automático a coordenadas objetivo</li>
                                    <li>Cálculo de bearing y distancia a objetivo</li>
                                    <li>Control de elevación basado en distancia al objetivo</li>
                                </ul>
                            </li>
                            <li><strong>Comandos:</strong>
                                <ul>
                                    <li>Cambio de rol o emparejamiento mediante MQTT/web</li>
                                    <li>Control manual de servos (web/MQTT)</li>
                                    <li>Configuración de objetivo de apuntamiento</li>
                                    <li>Calibración de heading</li>
                                    <li>Reinicio de fábrica</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </div>
            </section>

            <section class="version-info">
                <h2><i class="fas fa-code-branch"></i> Información de Versión</h2>
                <div class="version-details">
                    <p><strong>Versión:</strong> 2.1.0</p>
                    <p><strong>Fecha:</strong> 15 de Noviembre de 2023</p>
                    <p><strong>Autor:</strong> Equipo IoT Lab</p>
                    <p><strong>Licencia:</strong> MIT</p>
                </div>
            </section>
        </div>
        
        <footer>
            <p>&copy; 2023 IoT Lab - Sistema de Nodos Tracker</p>
        </footer>
    </div>
</body>
</html>
